{% extends "base.html" %}
{% block title %}
   Катлог карточек Anki
{% endblock title %}
{% block content %}
   {% load markdown_to_html %}
   <h1>Каталог карточек Anki для интервального повторения</h1>
   <p>Здесь вы можете выбрать карточки для изучения</p>
   <p>На текущий момент, у нас карточек: {{ cards_count }}</p>
   {% comment %} Пагинация начало {% endcomment %}
   <div class="col-12">{% include "includes/pagination.html" with page_obj=cards %}</div>
   {% comment %} Пагинация конец {% endcomment %}
   <p>
      <div class="container mt-3 col-auto">
         <form method="GET" action="{% url 'catalog' %}">
            <div class="row">
               <div class="input-group mb-3">
                  <input type="text"
                         class="form-control"
                         placeholder="Поиск по вопросам и ответам..."
                         aria-describedby="button-addon2"
                         name="search_query"
                         value="{{ request.GET.search_query }}">
                  <button class="btn btn-outline-secondary"
                          style="background-color: #1b5589"
                          type="submit"
                          id="button-addon2">
                     <i class="bi bi-search"></i>
                  </button>
               </div>
            </div>
            <div class="row">
               <div>Сортировки:</div>
               <div class="col-sm-2">
                  <select class="form-select" name="order" w-25>
                     <option value="desc" {% if request.GET.order == 'desc' %}selected{% endif %}>По убыванию</option>
                     <option value="asc" {% if request.GET.order == 'asc' %}selected{% endif %}>По возрастанию</option>
                  </select>
               </div>
               <div class="col-sm-10">
                  <button type="submit"
                          class="btn btn-secondary"
                          style="background-color: #1b5589"
                          name="sort"
                          value="upload_date">По дате</button>
                  <button type="submit"
                          class="btn btn-secondary"
                          style="background-color: #1b5589"
                          name="sort"
                          value="views">По просмотрам</button>
                  <button type="submit"
                          class="btn btn-secondary"
                          style="background-color: #1b5589"
                          name="sort"
                          value="adds">По добавлениям</button>
               </div>
            </div>
         </div>
      </form>
   </div>
</p>
{% for card in cards %}
   {% include "includes/card_preview.html" %}
{% endfor %}
{% comment %} Пагинация начало {% endcomment %}
<div class="col-12">{% include "includes/pagination.html" with page_obj=cards %}</div>
{% comment %} Пагинация конец {% endcomment %}
{% endblock content %}
